@page "/mangas/settings/{id}/"
@using Database
@using static Mangas
@layout EmptyLayout

@inject ILocalStorageService localStorage
@inject IDatabase db

<MudText Typo="Typo.h4">Advanced Settings</MudText>
<MudDivider></MudDivider>
<br style="margin-top:20px"/>
<MudText Typo="Typo.h6">Pages Auto Range</MudText>
<MudGrid>
    <MudItem xs="6">
        <MudTextField Variant="Variant.Outlined" Margin="Margin.Dense" Placeholder="Independent Url" T="string"></MudTextField>
    </MudItem>
    <MudItem xs="6" Style="display: flex">
        <MudTextField Variant="Variant.Outlined" Margin="Margin.Dense" Placeholder="Class" T="string"></MudTextField>
        <MudTooltip Text="Test page auto range">
            <MudIconButton OnClick="@(()=>_showAutoRangeTest = !_showAutoRangeTest)" Icon="@(!_showAutoRangeTest ? Icons.Filled.ArrowDownward : Icons.Filled.ArrowUpward)"></MudIconButton>
        </MudTooltip>
    </MudItem>
    @if (_showAutoRangeTest)
    {
        <MudItem xs="3">
            <MudTextField Variant="Variant.Outlined" Margin="Margin.Dense" Placeholder="Volume" T="string"></MudTextField>
        </MudItem>
        <MudItem xs="3" Style="display: flex">
            <MudTextField Variant="Variant.Outlined" Margin="Margin.Dense" Placeholder="Page" T="string"></MudTextField>
            <MudTooltip Text="Run test">
                <MudIconButton Icon="@Icons.Filled.PlayArrow" Color="Color.Success" ></MudIconButton>
            </MudTooltip>
        </MudItem>
    }
</MudGrid>

@code{

    [Parameter]
    public string id { get; set; } = "";

    public DataManga Manga;

    bool _showAutoRangeTest = false;
    
    protected override void OnInitialized()
    {
        //db.SetLocalStorage(localStorage);
        db.GetManga(id);

        base.OnInitialized();
    }

}